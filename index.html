
<!DOCTYPE html>

<html dir="rtl" lang="he">
<head>
<meta charset="utf-8"/>
<title>צמר שטיחים יפים</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<style>
    body { font-family: 'Heebo', sans-serif; background: #083029; color: #3F0D1F; margin: 0; }
    .header { background: #083029; text-align: center; padding: 20px; }
    .header img { height: 60px; }
    .wrapper { background: #E9E3D9; max-width: 600px; margin: auto; padding: 20px; border-radius: 0 0 20px 20px; }
    label { display: block; margin-top: 10px; font-weight: bold; }
    input, select, button {
      width: 100%; padding: 10px; margin-top: 5px;
      border: 1px solid #ccc; border-radius: 8px; font-size: 16px; box-sizing: border-box;
    }
    .orange-button {
      background: #EF9A3F; color: white; font-weight: bold;
      margin-top: 20px; border: none; cursor: pointer;
    }
    .carpet-block { background: #fff; padding: 15px; border-radius: 10px; margin-top: 20px; }
    .mini-price { color: #9E2605; font-weight: bold; margin-top: 10px; }
    .result { background: #fffbe6; padding: 15px; border: 2px solid #f7d486; border-radius: 10px; margin-top: 20px; }
    .final-screen {
      background: #083029; color: white; text-align: center;
      padding: 40px 20px; display: none;
    }
    .final-screen img { height: 70px; margin-bottom: 20px; }
    .checkmark { font-size: 60px; color: #EF9A3F; animation: pop 0.6s ease forwards; }
    @keyframes pop { 0% { transform: scale(0); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }
  </style>
</head>
<body>
<div style="background:#083029; text-align:center; padding:10px;">
<a href="https://tzemer.co.il" target="_blank">
<img alt="צמר לוגו" src="NEW_LOGO.png.webp" style="height:60px;"/>
</a>
</div>
<div class="header" id="mainHeader" style="display:none;">
<a href="https://tzemer.co.il" target="_blank">
<img alt="צמר לוגו" src="NEW_LOGO.png.webp"/>
</a>
</div>
<div class="wrapper" id="formSection">
<h2 style="text-align:center;">מחשבון לניקוי שטיחים</h2>
<label>מספר שטיחים:
      <select id="count" onchange="renderCarpets()">
<option value="1">1</option><option value="2">2</option>
<option value="3">3</option><option value="4">4</option><option value="5">5</option>
</select>
</label>
<div id="carpets"></div>
<label>שירות:
      <select id="delivery" onchange="toggleCityField()">
<option value="pickup">איסוף עצמי</option>
<option value="delivery">משלוח</option>
</select>
</label>
<div id="cityField" style="display:none;">
<label>עיר: <input id="city" type="text"/></label>
</div>
<button class="orange-button" onclick="calculate()">חשב הכל</button>
<div class="result" id="total" style="display:none;"></div>
</div>
<!-- jQuery UI for autocomplete -->
<link href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css" rel="stylesheet"/>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js"></script>
<script>
const availableCities = [
"תל אביב",
"ירושלים",
"חיפה",
"אשדוד",
"ראשון לציון",
"פתח תקווה",
"באר שבע",
"נתניה",
"חולון",
"בני ברק",
"רמת גן",
"אשקלון",
"רחובות",
"בית שמש",
"בת ים",
"כפר סבא",
"הרצליה",
"חדרה",
"מודיעין",
"לוד",
"רמלה",
"נצרת",
"עפולה",
"אום אל-פחם",
"טבריה",
"קריית אתא",
"נהריה",
"אילת",
"רמת השרון",
"רעננה",
"יבנה",
"שפרעם",
"קריית ים",
"קריית מוצקין",
"קריית אונו",
"גבעתיים",
"דימונה",
"טירה",
"טייבה",
"סח'נין",
"צפת",
"אופקים",
"עכו",
"טמרה",
"קריית גת",
"מעלה אדומים",
"אור יהודה",
"עילבון",
"קלנסווה",
"מגדל העמק",
"נתיבות",
"אריאל",
"נוף הגליל"
];

$(function() {
  $("#city").autocomplete({
    source: availableCities,
    minLength: 1
  });
});
</script>
<!-- Google Analytics -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-285148723"></script>

<script>
function renderCarpets() {
  const count = +document.getElementById("count").value;
  const container = document.getElementById("carpets");
  container.innerHTML = "";
  for (let i = 0; i < count; i++) {
    container.innerHTML += `
      <div class="carpet-block">
        <label>אורך (ס"מ): <input type="tel" inputmode="numeric" id="length_${i}" oninput="updatePrice(${i})"></label>
        <label>רוחב (ס"מ): <input type="tel" inputmode="numeric" id="width_${i}" oninput="updatePrice(${i})"></label>
        <label>סוג:
          <select id="type_${i}" onchange="updatePrice(${i})">
            <option value="machine">עבודת מכונה</option>
            <option value="manual">עבודת יד</option>
          </select>
        </label>
        <div class="mini-price" id="price_${i}"></div>
      </div>`;
  }
}

function updatePrice(i) {
  const len = +document.getElementById(`length_${i}`).value;
  const wid = +document.getElementById(`width_${i}`).value;
  const type = document.getElementById(`type_${i}`).value;
  if (!len || !wid) return;
  const area = (len * wid) / 10000;
  const perM = type === "manual" ? 135 : 95;
  let price = area * perM;
  if (area > 6) price *= 1.25;
  document.getElementById(`price_${i}`).innerText = `מחיר: ${price.toFixed(0)} ₪`;
}

function toggleCityField() {
  const val = document.getElementById("delivery").value;
  document.getElementById("cityField").style.display = val === "delivery" ? "block" : "none";
}

function calculate() {
  const count = +document.getElementById("count").value;
  let total = 0;
  let detailText = "";

  for (let i = 0; i < count; i++) {
    const len = +document.getElementById(`length_${i}`).value;
    const wid = +document.getElementById(`width_${i}`).value;
    const type = document.getElementById(`type_${i}`).value;
    if (!len || !wid) return alert("נא למלא את כל השדות");

    const area = (len * wid) / 10000;
    const perM = type === "manual" ? 135 : 95;
    let price = area * perM;
    if (area > 6) price *= 1.25;
    total += price;
    detailText += `שטיח ${i+1}: ${area.toFixed(2)} מ"ר – ${price.toFixed(0)} ₪
`;
  }

  const delivery = document.getElementById("delivery").value;
  const city = document.getElementById("city").value.trim();
  let deliveryCost = 0;
  if (delivery === "delivery") {
    if (!city) return alert("נא להזין עיר למשלוח");
    const freeCities = ["תל אביב", "בת ים", "רמת גן", "בני ברק", "גבעתיים", "חולון", "ראשון לציון"];
    deliveryCost = freeCities.includes(city) ? 0 : 200;
    total += deliveryCost;
    detailText += `משלוח: ${deliveryCost} ₪
`;
  }

  detailText += `סה"כ לתשלום: ${total.toFixed(0)} ₪`;

  document.getElementById("total").innerText = detailText;
  document.getElementById("total").style.display = "block";
}

document.addEventListener("DOMContentLoaded", renderCarpets);
</script>
</body>
</html>
